We	O
also	O
plan	O
to	O
extend	O
our	O
approach	O
to	O
cope	O
with	O
multitable	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
task	O
Spider	B-DatasetName
.	O

Equipped	O
with	O
automatic	O
-	O
generated	O
labels	O
and	O
AGG	O
enhancement	O
method	O
,	O
our	O
model	O
achieves	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
results	O
on	O
the	O
WikiSQL	B-TaskName
benchmark	O
.	O

Thanks	O
to	O
the	O
simple	O
,	O
unified	O
model	O
for	O
mention	B-MethodName
and	I-MethodName
relation	I-MethodName
extraction	I-MethodName
and	O
its	O
capacity	O
for	O
capturing	O
inter	O
mention	O
dependencies	O
,	O
the	O
proposed	O
method	O
proves	O
to	O
be	O
a	O
promising	O
approach	O
to	O
textto	B-TaskName
-	I-TaskName
SQL	I-TaskName
task	I-TaskName
.	O

We	O
can	O
extend	O
our	O
method	O
to	O
the	O
Spider	B-DatasetName
task	O
by	O
following	O
existing	O
sketch	O
construction	O
methods	O
as	O
in	O
RYANSQL	B-MethodName
,	O
while	O
replacing	O
their	O
slot	O
classification	O
modules	O
with	O
our	O
extractor	O
-	O
linker	O
methods	O
.	O

At	O
a	O
high	O
level	O
,	O
our	O
method	O
is	O
along	O
the	O
same	O
line	O
of	O
SQLNet	B-MethodName
-	O
RYANSQL	B-MethodName
,	O
yet	O
differs	O
with	O
them	O
,	O
as	O
our	O
method	O
extracts	O
slots	O
in	O
a	O
unified	O
way	O
rather	O
than	O
using	O
dedicated	O
modules	O
to	O
predict	O
each	O
slot	O
type	O
.	O

Recent	O
trend	O
(	O
Krishnamurthy	O
et	O
al	O
.	O
,	O
2017;Guo	O
et	O
al	O
.	O
,	O
2019;Wang	O
et	O
al	O
.	O
,	O
2020;Choi	O
et	O
al	O
.	O
,	O
2020	O
)	O
in	O
academia	O
starts	O
to	O
shift	O
to	O
multi	O
-	O
table	O
and	O
complex	O
queries	O
setting	O
of	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
,	O
as	O
in	O
the	O
Spider	B-DatasetName
task	O
(	O
Yu	O
et	O
al	O
.	O
,	O
2018b	O
)	O
.	O

State	O
-	O
of	O
-	O
the	O
art	O
methods	O
on	O
Spider	B-DatasetName
typically	O
fall	O
into	O
two	O
categories	O
:	O
grammarbased	B-MethodName
approach	I-MethodName
(	O
Guo	O
et	O
al	O
.	O
,	O
2019;Wang	O
et	O
al	O
.	O
,	O
2020	O
)	O
,	O
and	O
sketch	B-MethodName
-	I-MethodName
based	I-MethodName
approach	I-MethodName
,	O
such	O
as	O
RYAN	B-MethodName
-	I-MethodName
SQL	I-MethodName
(	O
Choi	O
et	O
al	O
.	O
,	O
2020	O
)	O
and	O
RECPARSER	B-MethodName
(	O
Zeng	O
et	O
al	O
.	O
,	O
2020	O
)	O
.	O

The	O
latter	O
ones	O
have	O
slot	O
prediction	O
modules	O
similar	O
to	O
SQLNet	B-MethodName
for	O
the	O
WikiSQL	B-DatasetName
,	O
while	O
recursion	O
modules	O
are	O
introduced	O
to	O
handle	O
the	O
generation	O
of	O
complex	O
SQL	O
sketches	O
,	O
a	O
characteristic	O
in	O
Spider	B-DatasetName
but	O
absent	O
in	O
WikiSQL	B-DatasetName
.	O

Furthermore	O
,	O
our	O
extractor	B-MethodName
-	I-MethodName
linker	I-MethodName
architecture	I-MethodName
is	O
also	O
much	O
simpler	O
than	O
sketch	B-MethodName
-	I-MethodName
based	I-MethodName
methods	I-MethodName
.	O

Recent	O
advances	O
(	O
Yu	O
et	O
al	O
.	O
,	O
2018a;Dong	O
and	O
Lapata	O
,	O
2018;Hwang	O
et	O
al	O
.	O
,	O
2019;He	O
et	O
al	O
.	O
,	O
2019	O
)	O
follow	O
this	O
approach	O
and	O
achieve	O
comparative	O
results	O
on	O
Wik	B-DatasetName
-	I-DatasetName
iSQL	I-DatasetName
,	O
mostly	O
by	O
using	O
pre	O
-	O
trained	O
language	O
models	O
as	O
the	O
encoder	O
.	O

SQLNet	B-MethodName
(	O
Xu	O
et	O
al	O
.	O
,	O
2018	O
)	O
introduces	O
sketchbased	O
method	O
,	O
which	O
decomposes	O
the	O
SQL	O
synthesis	O
into	O
several	O
independent	O
classification	O
sub	O
-	O
tasks	O
,	O
including	O
select	O
-	O
aggregation	O
/	O
column	O
and	O
wherenumber	O
/	O
column	O
/	O
operator	O
/	O
value	O
.	O

These	O
sequence	B-MethodName
-	I-MethodName
to	I-MethodName
-	I-MethodName
sequence	I-MethodName
approaches	O
often	O
suffer	O
the	O
"	O
ordering	O
issue	O
"	O
since	O
they	O
are	O
designed	O
to	O
fit	O
an	O
ordered	O
sequence	O
,	O
while	O
the	O
conditions	O
in	O
WHEREclause	O
are	O
unordered	O
in	O
nature	O
.	O

Pointer	B-MethodName
networks	I-MethodName
(	O
Vinyals	O
et	O
al	O
.	O
,	O
2015	O
)	O
are	O
also	O
commonly	O
adopted	O
.	O

Earlier	O
work	O
(	O
Dong	O
and	O
Lapata	O
,	O
2016;Krishnamurthy	O
et	O
al	O
.	O
,	O
2017;Zhong	O
et	O
al	O
.	O
,	O
2018;Sun	O
et	O
al	O
.	O
,	O
2018;Wang	O
et	O
al	O
.	O
,	O
2018	O
)	O
follow	O
a	O
neural	B-MethodName
sequence	I-MethodName
-	I-MethodName
to	I-MethodName
-	I-MethodName
sequence	I-MethodName
paradigm	O
(	O
Sutskever	O
et	O
al	O
.	O
,	O
2014	O
)	O
with	O
attention	O
mechanism	O
(	O
Bahdanau	O
et	O
al	O
.	O
,	O
2014	O
)	O
.	O

Text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
is	O
a	O
sub	O
-	O
area	O
of	O
semantic	B-TaskName
parsing	I-TaskName
,	O
which	O
is	O
widely	O
studied	O
in	O
recent	O
years	O
.	O

Semantic	B-TaskName
parsing	I-TaskName
(	O
Berant	O
et	O
al	O
.	O
,	O
2013	O
)	O
is	O
to	O
map	O
natural	O
language	O
utterances	O
to	O
machine	O
-	O
interpretable	O
representations	O
,	O
such	O
as	O
logic	O
forms	O
(	O
Dong	O
and	O
Lapata	O
,	O
2016	O
)	O
,	O
program	O
codes	O
(	O
Yin	O
and	O
Neubig	O
,	O
2017	O
)	O
,	O
and	O
SQL	O
queries	O
(	O
Zhong	O
et	O
al	O
.	O
,	O
2018	O
)	O
.	O

In	O
this	O
setting	O
,	O
the	O
logic	B-MetricName
form	I-MetricName
and	O
execution	B-MetricName
accuracy	I-MetricName
on	O
the	O
dev	O
set	O
reaches	O
92.8	B-MetricValue
%	I-MetricValue
and	O
94.2	B-MetricValue
%	I-MetricValue
,	O
respectively	O
,	O
which	O
are	O
the	O
ceiling	O
for	O
our	O
approach	O
.	O

The	O
improved	O
AGG	B-MetricName
accuracy	I-MetricName
also	O
leads	O
to	O
the	O
new	O
stateof	O
-	O
the	O
-	O
art	O
for	O
the	O
overall	O
SQL	O
results	O
.	O

shows	O
the	O
slot	O
type	O
-	O
wise	O
results	O
,	O
where	O
our	O
method	O
achieves	O
new	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
results	O
on	O
the	O
W	B-MetricName
col	I-MetricName
,	O
W	B-MetricName
val	I-MetricName
and	O
W	B-MetricName
op	I-MetricName
accuracies	I-MetricName
.	O

For	O
the	O
results	O
with	O
the	O
EG	O
in	O
Table	O
2	O
,	O
our	O
method	O
outperforms	O
all	O
the	O
existing	O
methods	O
,	O
including	O
SQLova	B-MethodName
,	O
X	B-MethodName
-	I-MethodName
SQL	I-MethodName
and	O
HydraNet	B-MethodName
,	O
leading	O
to	O
new	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
in	O
the	O
SQL	O
accuracies	B-MetricName
in	O
terms	O
of	O
both	O
logic	O
form	O
and	O
execution	O
.	O

(	O
2019a	O
)	O
shows	O
MT	B-MethodName
-	I-MethodName
DNN	I-MethodName
also	O
outperforms	O
BERT	B-MethodName
in	O
many	O
tasks	O
.	O

(	O
2020	O
)	O
shows	O
that	O
RoBERTa	B-MethodName
large	I-MethodName
outperform	O
BERT	B-MethodName
large	I-MethodName
in	O
their	O
setting	O
and	O
Liu	O
et	O
al	O
.	O

Without	O
EG	O
,	O
our	O
method	O
with	O
BERT	B-MethodName
-	I-MethodName
base	I-MethodName
outperforms	O
most	O
of	O
existing	O
methods	O
,	O
including	O
SQLova	B-MethodName
with	O
BERTlarge	O
and	O
MT	O
-	O
DNN	O
(	O
Liu	O
et	O
al	O
.	O
,	O
2019a)-based	O
X	B-MethodName
-	I-MethodName
SQL	I-MethodName
,	O
and	O
ranks	O
right	O
after	O
HydraNet	B-MethodName
,	O
which	O
is	O
based	O
on	O
RoBerTa	O
(	O
Liu	O
et	O
al	O
.	O
,	O
2019b	O
)	O
large	O
.	O

We	O
compare	O
our	O
method	O
with	O
notable	O
models	O
that	O
have	O
reported	O
results	O
on	O
WikiSQL	B-DatasetName
task	O
,	O
including	O
Seq2SQL	B-MethodName
(	O
Zhong	O
et	O
al	O
.	O
,	O
2018	O
)	O
,	O
SQLNet	B-MethodName
(	O
Xu	O
et	O
al	O
.	O
,	O
2018	O
)	O
,	O
TypeSQL	B-MethodName
(	O
Yu	O
et	O
al	O
.	O
,	O
2018a	O
)	O
,	O
Coarseto	B-MethodName
-	I-MethodName
Fine	I-MethodName
(	O
Dong	O
and	O
Lapata	O
,	O
2018	O
)	O
,	O
SQLova	B-MethodName
(	O
Hwang	O
et	O
al	O
.	O
,	O
2019	O
)	O
,	O
X	B-MethodName
-	I-MethodName
SQL	I-MethodName
(	O
He	O
et	O
al	O
.	O
,	O
2019	O
)	O
and	O
Hy	B-MethodName
-	I-MethodName
draNet	I-MethodName
(	O
Lyu	O
et	O
al	O
.	O
,	O
2020	O
)	O
in	O
Table	O
2	O
.	O

We	O
choose	O
uncased	B-MethodName
BERT	I-MethodName
-	I-MethodName
base	I-MethodName
pre	I-MethodName
-	I-MethodName
trained	I-MethodName
model	O
with	O
default	O
settings	O
due	O
to	O
resource	O
limitations	O
.	O

As	O
statistical	O
aligner	O
can	O
occasionally	O
yield	O
null	O
-	O
alignment	O
for	O
a	O
few	O
tokens	O
,	O
we	O
use	O
another	O
unsupervised	B-MethodName
word	I-MethodName
and	I-MethodName
semantic	I-MethodName
similarity	I-MethodName
-	I-MethodName
based	I-MethodName
algorithm	I-MethodName
(	O
Perez	O
et	O
al	O
.	O
,	O
2020	O
)	O
to	O
complement	O
the	O
missing	O
alignments	O
.	O

Given	O
the	O
characteristic	O
of	O
the	O
data	O
and	O
the	O
possible	O
limitation	O
of	O
the	O
information	B-MethodName
extraction	I-MethodName
-	I-MethodName
based	I-MethodName
model	I-MethodName
,	O
we	O
improve	O
the	O
AGG	O
results	O
over	O
the	O
original	O
model	O
,	O
using	O
only	O
simple	O
association	O
signals	O
in	O
the	O
training	O
data	O
.	O

To	O
this	O
end	O
,	O
we	O
adopt	O
transformation	B-MethodName
-	I-MethodName
based	I-MethodName
learning	I-MethodName
algorithm	I-MethodName
(	O
Brill	O
,	O
1995	O
)	O
to	O
update	O
the	O
AGG	O
predictions	O
based	O
on	O
association	O
rules	O
in	O
the	O
form	O
of	O
"	O
change	O
AGG	O
from	O
x	O
to	O
x	O
,	O
given	O
certain	O
word	O
tuple	O
occurrences	O
.	O
"	O
Such	O
rules	O
are	O
mined	O
and	O
ranked	O
from	O
the	O
training	O
data	O
by	O
the	O
algorithm	O
.	O

(	O
2019	O
)	O
that	O
AGG	O
annotations	O
in	O
WikiSQL	B-DatasetName
have	O
up	O
to	O
10	O
%	O
of	O
errors	O
.	O

v	O
CLS	O
i	O
=	O
BERT([span	B-MethodName
;	O
C	O
i	O
]	O
)	O
P	O
(	O
i	O
)	O
=	O
Sigmoid(W	O
v	O
CLS	O
)	O
(	O
2	O
)	O
.	O

Again	O
,	O
BERT	B-MethodName
is	O
used	O
as	O
the	O
underlying	O
model	O
for	O
its	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
performance	O
on	O
text	O
matching	O
.	O

To	O
convert	O
mention	B-MethodName
and	I-MethodName
relation	I-MethodName
extraction	I-MethodName
results	O
to	O
SQL	O
,	O
we	O
need	O
a	O
schema	O
linking	O
module	O
to	O
link	O
explicit	O
and	O
implicit	O
column	O
mentions	O
to	O
its	O
canonical	O
column	O
names	O
in	O
the	O
table	O
schema	O
.	O

As	O
the	O
two	O
labeling	O
tasks	O
can	O
benefit	O
each	O
other	O
,	O
we	O
fine	O
-	O
tune	O
BERT	B-MethodName
in	O
a	O
multi	O
-	O
task	O
learning	O
way	O
.	O

Finally	O
,	O
the	O
resulting	O
token	O
representations	O
are	O
fed	O
to	O
the	O
CRF	B-MethodName
layer	O
,	O
which	O
yields	O
the	O
label	O
sequence	O
.	O

Q	O
B	O
;	O
C	O
B	O
=	O
BERT([Q	B-MethodName
;	O
C	O
]	O
)	O
Q	O
att	O
=	O
Attention(Q	O
B	O
,	O
C	O
B	O
,	O
C	O
B	O
)	O
+	O
Q	O
B	O
L	O
=	O
CRF(W	O
L	O
Q	O
att	O
)	O
(	O
1	O
)	O
Before	O
the	O
BERT	B-MethodName
representations	O
are	O
fed	O
to	O
the	O
CRF	B-MethodName
layer	O
,	O
they	O
first	O
go	O
through	O
an	O
attention	O
layer	O
(	O
Bahdanau	O
et	O
al	O
.	O
,	O
2014	O
)	O
,	O
which	O
encodes	O
the	O
question	O
tokens	O
with	O
columns	O
in	O
the	O
schema	O
.	O

The	O
full	O
model	O
is	O
described	O
as	O
in	O
equation	O
(	O
1	O
)	O
,	O
where	O
BERT	B-MethodName
denotes	O
the	O
BERT	B-MethodName
model	O
while	O
CRF	B-MethodName
denotes	O
a	O
CRF	B-MethodName
layer	O
.	O

As	O
the	O
labeling	O
is	O
w.r.t	O
.	O
the	O
question	O
sentence	O
,	O
the	B-MethodName
conditional	I-MethodName
random	I-MethodName
filed	I-MethodName
(	O
CRF	B-MethodName
)	O
(	O
Lafferty	O
et	O
al	O
.	O
,	O
2001	O
)	O
layer	O
only	O
is	O
applied	O
to	O
the	O
question	O
segment	O
.	O

Similar	O
to	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
methods	O
for	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
such	O
as	O
SQLova	B-MethodName
(	O
Hwang	O
et	O
al	O
.	O
,	O
2019	O
)	O
,	O
we	O
concatenate	O
the	O
question	O
text	O
along	O
with	O
the	O
table	O
header	O
as	O
input	O
for	O
BERT	B-MethodName
,	O
in	O
the	O
form	O
of	O
q	O
1	O
,	O
q	O
2	O
,	O
..	O
,	O
q	O
L	O
,	O
[	O
SEP	O
]	O
,	O
c	O
1,1	O
,	O
c	O
1,2	O
,	O
...	O
,	O
[	O
SEP	O
]	O
,	O
c	O
2,1	O
,	O
...	O
,	O
c	O
M,1	O
...	O
,	O
where	O
Q	O
(	O
|Q|	O
=	O
L	O
)	O
is	O
the	O
question	O
while	O
C	O
=	O
c	O
1	O
,	O
..	O
,	O
c	O
M	O
(	O
|C|	O
=	O
M	O
)	O
are	O
the	O
table	O
headers	O
.	O

As	O
pre	O
-	O
trained	O
language	O
models	O
such	O
as	O
BERT	B-MethodName
achieve	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
performance	O
on	O
various	O
NLP	O
tasks	O
including	O
sequence	O
labeling	O
,	O
we	O
adopt	O
BERT	B-MethodName
to	O
get	O
contextualized	O
representations	O
for	O
both	O
role	O
and	O
span	O
labeling	O
.	O

Such	O
annotations	O
can	O
be	O
useful	O
for	O
developing	O
novel	O
methods	O
for	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
,	O
such	O
as	O
question	O
decomposition	O
-	O
based	O
approaches	O
.	O

To	O
the	O
best	O
of	O
our	O
knowledge	O
,	O
this	O
is	O
the	O
first	O
work	O
that	O
formulates	O
the	O
task	O
as	O
sequence	B-MethodName
labeling	I-MethodName
-	I-MethodName
based	I-MethodName
extraction	I-MethodName
plus	I-MethodName
linking	I-MethodName
,	O
which	O
enjoys	O
the	O
advantage	O
of	O
structural	O
simplicity	O
and	O
interdependency	O
awareness	O
.	O

The	O
main	O
contribution	O
of	O
this	O
paper	O
is	O
the	O
mention	B-MethodName
and	I-MethodName
relation	I-MethodName
extraction	I-MethodName
-	I-MethodName
based	I-MethodName
approach	O
to	O
textto	B-TaskName
-	I-TaskName
SQL	I-TaskName
task	I-TaskName
.	O

Trained	O
with	O
such	O
annotations	O
and	O
applied	O
AE	O
method	O
,	O
the	O
proposed	O
method	O
can	O
already	O
achieves	O
the	O
first	O
place	O
on	O
the	O
WikiSQL	B-DatasetName
benchmark	O
.	O

The	O
output	O
of	O
the	O
extractor	O
can	O
be	O
deterministically	O
translated	O
into	O
pseudo	O
SQLs	O
,	O
before	O
a	O
BERT	B-MethodName
-	I-MethodName
based	I-MethodName
linker	I-MethodName
(	O
Section	O
2.2	O
)	O
maps	O
the	O
column	O
mentions	O
to	O
the	O
table	O
headers	O
to	O
get	O
executable	O
SQL	O
queries	O
.	O

To	O
this	O
end	O
,	O
we	O
leverage	O
one	O
unified	O
BERT	B-MethodName
-	I-MethodName
based	I-MethodName
(	O
Devlin	O
et	O
al	O
.	O
,	O
2019	O
)	O
extractor	B-MethodName
(	O
Section	O
2.1	O
)	O
to	O
recognize	O
the	O
slot	O
mentions	O
as	O
well	O
as	O
their	O
relations	O
,	O
from	O
the	O
natural	O
language	O
questions	O
.	O

To	O
deal	O
with	O
these	O
drawbacks	O
,	O
this	O
paper	O
formulates	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
as	O
mention	B-MethodName
extraction	I-MethodName
and	I-MethodName
linking	I-MethodName
problems	O
in	O
a	O
sequence	O
labeling	O
manner	O
(	O
Section	O
2	O
)	O
.	O

On	O
the	O
WikiSQL	B-DatasetName
(	O
Zhong	O
et	O
al	O
.	O
,	O
2018	O
)	O
benchmark	O
for	O
multi	O
-	O
domain	O
,	O
single	O
table	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
,	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
systems	O
(	O
Hwang	O
et	O
al	O
.	O
,	O
2019;He	O
et	O
al	O
.	O
,	O
2019	O
)	O
can	O
predict	O
more	O
than	O
80	O
%	O
of	O
entire	O
SQL	O
queries	O
correctly	O
.	O

Recently	O
,	O
by	O
the	O
development	O
of	O
deep	O
learning	O
,	O
significant	O
advances	O
have	O
been	O
made	O
in	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
.	O

As	O
a	O
subarea	O
of	O
semantic	O
parsing	O
(	O
Berant	O
et	O
al	O
.	O
,	O
2013	O
)	O
,	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
is	O
known	O
to	O
be	O
difficult	O
due	O
to	O
the	O
flexibility	O
in	O
natural	O
language	O
.	O

Textto	B-TaskName
-	I-TaskName
SQL	I-TaskName
technology	O
is	O
very	O
useful	O
as	O
it	O
can	O
empower	O
humans	O
to	O
naturally	O
interact	O
with	O
relational	O
databases	O
,	O
which	O
serve	O
as	O
foundations	O
for	O
the	O
digital	O
world	O
today	O
.	O

Text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
systems	O
generate	O
SQL	O
queries	O
according	O
to	O
given	O
natural	O
language	O
questions	O
.	O

Trained	O
with	O
automatically	O
generated	O
annotations	O
,	O
the	O
proposed	O
method	O
achieves	O
the	O
first	O
place	O
on	O
the	O
WikiSQL	B-DatasetName
benchmark	O
.	O

To	O
solve	O
these	O
problems	O
,	O
this	O
paper	O
proposes	O
a	O
novel	O
extraction	B-MethodName
-	I-MethodName
linking	I-MethodName
approach	O
,	O
where	O
a	O
unified	O
extractor	O
recognizes	O
all	O
types	O
of	O
slot	O
mentions	O
appearing	O
in	O
the	O
question	O
sentence	O
before	O
a	O
linker	O
maps	O
the	O
recognized	O
columns	O
to	O
the	O
table	O
schema	O
to	O
generate	O
executable	O
SQL	O
queries	O
.	O

On	O
the	O
WikiSQL	B-DatasetName
benchmark	O
,	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
text	B-TaskName
-	I-TaskName
to	I-TaskName
-	I-TaskName
SQL	I-TaskName
systems	O
typically	O
take	O
a	O
slotfilling	O
approach	O
by	O
building	O
several	O
dedicated	O
models	O
for	O
each	O
type	O
of	O
slots	O
.	O

Mention	B-MethodName
Extraction	I-MethodName
and	I-MethodName
Linking	I-MethodName
for	O
SQL	B-TaskName
Query	I-TaskName
Generation	I-TaskName
.	O

We	O
thank	O
Jun	O
Xu	O
,	O
Muhua	O
Zhu	O
,	O
Wanxiang	O
Che	O
and	O
Longxu	O
Dou	O
as	O
well	O
as	O
all	O
the	O
anonymous	O
reviewers	O
for	O
their	O
invaluable	O
comments	O
and	O
suggestions	O
.	O

Acknowledgements	O
.	O

Since	O
the	O
current	O
automatic	O
-	O
generated	O
annotations	O
are	O
still	O
noisy	O
,	O
it	O
is	O
useful	O
to	O
further	O
improve	O
the	O
automatic	O
annotation	O
procedure	O
.	O

Conclusion	O
and	O
Future	O
Work	O
.	O

The	O
mentions	O
for	O
values	O
,	O
operators	O
and	O
corresponding	O
columns	O
often	O
appear	O
in	O
proximity	O
in	O
the	O
question	O
,	O
thus	O
the	O
sequence	O
labeling	O
model	O
can	O
better	O
capture	O
their	O
dependencies	O
and	O
benefits	O
the	O
recognition	O
for	O
all	O
of	O
them	O
,	O
as	O
experiment	O
results	O
suggest	O
.	O

While	O
our	O
sequence	O
labeling	O
method	O
is	O
also	O
based	O
on	O
pre	O
-	O
trained	O
language	O
model	O
,	O
it	O
differs	O
from	O
state	O
-	O
of	O
-	O
the	O
-	O
art	O
methods	O
in	O
that	O
it	O
explicitly	O
ex	O
-	O
tracts	O
mentions	O
from	O
the	O
questions	O
and	O
can	O
benefit	O
from	O
inter	O
-	O
dependency	O
modeling	O
between	O
extracted	O
mentions	O
.	O

Moreover	O
,	O
each	O
submodule	O
solves	O
its	O
own	O
classification	O
problem	O
,	O
without	O
considering	O
the	O
dependencies	O
with	O
SQL	O
elements	O
modeled	O
by	O
other	O
sub	O
-	O
modules	O
.	O

These	O
sketch	O
-	O
based	O
models	O
raise	O
challenges	O
in	O
training	O
,	O
deployment	O
and	O
maintenance	O
.	O

Except	O
wherevalue	O
,	O
which	O
is	O
usually	O
predicted	O
by	O
a	O
pointer	O
network	O
,	O
all	O
the	O
other	O
sub	O
-	O
tasks	O
use	O
their	O
own	O
dedicated	O
classifiers	O
to	O
make	O
predictions	O
.	O

Related	O
Work	O
.	O

(	O
2019	O
)	O
,	O
suggesting	O
that	O
the	O
quality	O
of	O
the	O
automatic	O
annotation	O
is	O
reasonably	O
good	O
.	O

Note	O
that	O
such	O
ceiling	O
is	O
above	O
the	O
human	O
-	O
level	O
accuracy	O
reported	O
in	O
Hwang	O
et	O
al	O
.	O

The	O
quality	O
of	O
automatic	O
annotation	O
can	O
be	O
estimated	O
in	O
an	O
oracle	O
extractor	O
setting	O
,	O
where	O
the	O
automatically	O
annotated	O
labels	O
,	O
instead	O
of	O
the	O
extractor	O
prediction	O
,	O
are	O
fed	O
to	O
the	O
linker	O
.	O

A	O
limitation	O
of	O
our	O
sequence	O
labeling	O
-	O
based	O
approach	O
is	O
that	O
it	O
performs	O
passably	O
on	O
some	O
questions	O
with	O
nested	O
span	O
structures	O
,	O
as	O
in	O
the	O
question	O
"	O
When	O
does	O
the	O
train	O
[	O
arriving	O
at	O
[	O
Bourne	O
]	O
Estimating	O
Annotation	O
Quality	O
.	O

We	O
close	O
such	O
gap	O
with	O
AE	O
using	O
only	O
word	O
co	O
-	O
occurrence	O
features	O
.	O

Before	O
applying	O
AGG	O
enhancement	O
(	O
AE	O
)	O
,	O
the	O
bottleneck	O
of	O
our	O
method	O
is	O
on	O
AGG	O
prediction	O
.	O

Since	O
the	O
operators	O
and	O
values	O
are	O
directly	O
derived	O
from	O
the	O
extractor	O
,	O
such	O
results	O
are	O
evidence	O
for	O
the	O
effectiveness	O
of	O
our	O
extraction	O
-	O
based	O
approach	O
.	O

Despite	O
disadvantage	O
in	O
underlying	O
pre	O
-	O
trained	O
language	O
model	O
,	O
our	O
model	O
achieves	O
competitive	O
results	O
.	O

Lyu	O
et	O
al	O
.	O

Results	O
.	O

Codes	O
are	O
implemented	O
in	O
Pytorch	O
1.3	O
and	O
will	O
be	O
made	O
publicly	O
available	O
1	O
.	O

(	O
2019	O
)	O
.	O

The	O
training	O
procedures	O
follows	O
Hwang	O
et	O
al	O
.	O

3	O
Experiment	O
and	O
Ba	O
,	O
2014	O
)	O
to	O
optimize	O
the	O
model	O
with	O
default	O
hyper	O
-	O
parameters	O
.	O

The	O
second	O
step	O
is	O
label	O
generation	O
,	O
where	O
the	O
roles	O
are	O
generated	O
according	O
to	O
aligned	O
elements	O
,	O
while	O
the	O
span	O
labels	O
are	O
assigned	O
by	O
considering	O
minimal	O
text	O
span	O
that	O
covers	O
all	O
the	O
elements	O
in	O
a	O
SELECT	O
/	O
WHERE	O
clause	O
.	O

For	O
this	O
purpose	O
,	O
we	O
choose	O
Berkeley	O
aligner	O
(	O
Liang	O
et	O
al	O
.	O
,	O
2006	O
)	O
,	O
which	O
works	O
by	O
estimating	O
the	O
co	O
-	O
occurrence	O
of	O
tokens	O
in	O
the	O
parallel	O
corpora	O
,	O
which	O
are	O
the	O
question	O
-	O
SQL	O
pairs	O
in	O
our	O
case	O
.	O

The	O
first	O
pass	O
conducts	O
exact	O
and	O
partial	O
string	O
match	O
to	O
recognize	O
values	O
and	O
some	O
of	O
the	O
columns	O
,	O
while	O
the	O
second	O
pass	O
aligns	O
the	O
remaining	O
SQL	O
slots	O
,	O
by	O
training	O
a	O
statistical	O
aligner	O
with	O
the	O
training	O
set	O
of	O
the	O
data	O
.	O

The	O
first	O
step	O
is	O
alignment	O
,	O
which	O
runs	O
two	O
pass	O
of	O
aligning	O
.	O

Specifically	O
,	O
the	O
proposed	O
method	O
is	O
a	O
two	O
-	O
step	O
procedure	O
.	O

Figure	O
1	O
depicts	O
such	O
alignments	O
with	O
arrows	O
and	O
colors	O
.	O

The	O
idea	O
is	O
to	O
annotate	O
mentions	O
by	O
aligning	O
the	O
SQL	O
slots	O
in	O
the	O
query	O
to	O
tokens	O
in	O
the	O
question	O
.	O

Since	O
manual	O
annotations	O
are	O
costly	O
,	O
we	O
resort	O
to	O
automatic	O
ways	O
.	O

A	O
challenge	O
for	O
training	O
the	O
extractor	O
is	O
that	O
benchmark	O
datasets	O
have	O
no	O
role	O
or	O
span	O
annotations	O
.	O

Automatic	O
Annotation	O
via	O
Alignment	O
.	O

Another	O
reason	O
may	O
be	O
that	O
no	O
all	O
the	O
aggregation	O
functions	O
are	O
grounded	O
to	O
particular	O
tokens	O
.	O

In	O
such	O
case	O
,	O
as	O
our	O
extractor	O
model	O
has	O
to	O
take	O
care	O
of	O
other	O
types	O
of	O
slots	O
,	O
these	O
extra	O
constraints	O
make	O
it	O
more	O
challenging	O
for	O
our	O
model	O
to	O
fit	O
flawed	O
data	O
,	O
compared	O
with	O
a	O
dedicated	O
AGG	O
classifier	O
,	O
as	O
in	O
most	O
SOTA	O
methods	O
.	O

Analysis	O
of	O
preliminary	O
results	O
suggests	O
that	O
aggregation	O
function	O
(	O
AGG	O
)	O
prediction	O
is	O
a	O
bottleneck	O
for	O
our	O
system	O
,	O
which	O
is	O
partly	O
attributed	O
to	O
the	O
findings	O
by	O
Hwang	O
et	O
al	O
.	O

AGG	O
prediction	O
enhancement	O
.	O

The	O
matching	O
procedure	O
can	O
be	O
described	O
as	O
in	O
equation	O
(	O
2	O
)	O
.	O

Special	O
tokens	O
of	O
[	O
W	O
]	O
and	O
[	O
S	O
]	O
are	O
used	O
to	O
distinguish	O
SELECT	O
spans	O
from	O
FIL	O
-	O
TER	O
spans	O
.	O

Formally	O
,	O
we	O
define	O
the	O
linker	O
as	O
a	O
text	O
matching	O
model	O
,	O
i.e.	O
estimating	O
a	O
function	O
f	O
(	O
[	O
C	O
i	O
;	O
span	O
;	O
Q	O
]	O
)	O
→	O
{	O
0	O
,	O
1	O
}	O
,	O
where	O
C	O
i	O
is	O
a	O
header	O
in	O
the	O
table	O
schema	O
,	O
span	O
is	O
the	O
either	O
an	O
extracted	O
column	O
mention	O
(	O
for	O
linking	O
explicit	O
column	O
mention	O
)	O
or	O
an	O
extracted	O
value	O
v	O
(	O
for	O
linking	O
implicit	O
column	O
mention	O
)	O
.	O

Such	O
case	O
is	O
challenging	O
yet	O
not	O
uncommon	O
.	O

The	O
latter	O
case	O
is	O
implicit	O
mention	O
of	O
column	O
,	O
as	O
only	O
the	O
value	O
for	O
the	O
column	O
,	O
Josefin	O
Lillhage	O
,	O
appears	O
in	O
the	O
question	O
.	O

The	O
column	O
mentions	O
in	O
the	O
question	O
sentence	O
often	O
differ	O
with	O
the	O
the	O
canonical	O
column	O
names	O
in	O
the	O
table	O
schema	O
in	O
terms	O
of	O
string	O
forms	O
,	O
as	O
shown	O
in	O
Figure	O
1	O
,	O
where	O
SPLIT	O
(	O
50	O
M	O
)	O
is	O
mentioned	O
as	O
50	O
m	O
splits	O
and	O
NAME	O
is	O
not	O
mentioned	O
at	O
all	O
.	O

Schema	O
Linking	O
as	O
Matching	O
.	O

The	O
resulting	O
representation	O
is	O
added	O
to	O
the	O
original	O
token	O
representation	O
in	O
an	O
element	O
-	O
wise	O
manner	O
.	O

Special	O
SEP	O
token	O
is	O
inserted	O
between	O
different	O
headers	O
c	O
i	O
as	O
well	O
as	O
between	O
the	O
question	O
sentence	O
Q	O
and	O
the	O
first	O
header	O
c	O
1	O
.	O

Each	O
header	O
c	O
i	O
may	O
have	O
multiple	O
tokens	O
,	O
thus	O
the	O
2	O
-	O
d	O
indexes	O
of	O
c	O
i	O
,	O
j	O
being	O
used	O
.	O

Extractor	O
Model	O
The	O
model	O
first	O
encodes	O
the	O
question	O
text	O
and	O
the	O
table	O
headers	O
.	O

With	O
these	O
defined	O
label	O
set	O
,	O
the	O
recognition	O
of	O
both	O
slot	O
mentions	O
and	O
slot	O
relations	O
are	O
formulated	O
as	O
sequence	O
labeling	O
.	O

For	O
our	O
task	O
,	O
we	O
define	O
two	O
sets	O
of	O
labels	O
:	O
(	O
a	O
)	O
the	O
SQL	O
role	O
labels	O
representing	O
the	O
slot	O
mentions	O
;	O
(	O
b	O
)	O
the	O
span	O
labels	O
representing	O
the	O
slot	O
relations	O
,	O
both	O
of	O
which	O
are	O
shown	O
in	O
Table	O
1	O
.	O

The	O
standing	O
alone	O
O	O
label	O
is	O
assigned	O
to	O
tokens	O
that	O
are	O
outside	O
of	O
any	O
type	O
of	O
annotation	O
of	O
interest	O
.	O

As	O
shown	O
in	O
bel	O
l	O
∈	O
{	O
T	O
×	O
{	O
B	O
,	O
I	O
}	O
,	O
O	O
}	O
,	O
where	O
×	O
denotes	O
the	O
Cartesian	O
product	O
of	O
T	O
,	O
the	O
set	O
of	O
functional	O
labels	O
,	O
and	O
the	O
set	O
of	O
positional	O
label	O
of	O
{	O
B	O
,	O
I	O
}	O
,	O
where	O
B	O
and	O
I	O
means	O
the	O
beginning	O
and	O
the	O
continuation	O
of	O
a	O
particular	O
annotation	O
t	O
∈	O
T	O
,	O
respectively	O
.	O

Thus	O
,	O
the	O
extraction	O
of	O
the	O
relations	O
is	O
equivalent	O
to	O
the	O
labeling	O
of	O
the	O
corresponding	O
text	O
span	O
.	O

As	O
for	O
the	O
slot	O
relations	O
,	O
note	O
that	O
the	O
column	O
,	O
value	O
and	O
operator	O
that	O
form	O
a	O
filter	O
condition	O
relation	O
usually	O
appear	O
in	O
adjacency	O
in	O
the	O
question	O
,	O
such	O
as	O
in	O
lanes	O
above	O
8	O
in	O
the	O
example	O
.	O

Most	O
of	O
the	O
SQL	O
slots	O
are	O
mentioned	O
in	O
the	O
question	O
,	O
as	O
shown	O
in	O
Figure	O
1(a	O
)	O
.	O

The	O
extractor	O
recognizes	O
(	O
1	O
)	O
slot	O
mentions	O
,	O
including	O
the	O
SELECT	O
column	O
with	O
aggregation	O
function	O
,	O
WHERE	O
columns	O
with	O
corresponding	O
values	O
and	O
operators	O
;	O
and	O
(	O
2	O
)	O
slot	O
relations	O
,	O
namely	O
associating	O
each	O
WHERE	O
column	O
with	O
its	O
operator	O
and	O
value	O
.	O

Extractor	O
.	O

Method	O
.	O

In	O
addition	O
,	O
we	O
also	O
propose	O
an	O
automatic	O
method	O
to	O
generate	O
annotations	O
.	O

Also	O
,	O
preliminary	O
results	O
show	O
that	O
the	O
prediction	O
of	O
aggregation	O
function	O
(	O
AGG	O
)	O
restricts	O
model	O
performance	O
,	O
which	O
induces	O
us	O
to	O
put	O
forward	O
AGG	O
prediction	O
enhancement	O
(	O
AE	O
)	O
method	O
inspired	O
by	O
Brill	O
(	O
1995	O
)	O
.	O

Thus	O
we	O
propose	O
an	O
automatic	O
annotation	O
method	O
(	O
Section	O
2.4	O
)	O
based	O
on	O
aligning	O
tokens	O
in	O
a	O
SQL	O
with	O
corresponding	O
question	O
.	O

A	O
major	O
challenge	O
to	O
the	O
proposed	O
method	O
is	O
the	O
absence	O
of	O
manual	O
annotation	O
of	O
mentions	O
and	O
relations	O
.	O

Thus	O
,	O
the	O
recognition	O
of	O
the	O
mentions	O
and	O
their	O
relations	O
would	O
mostly	O
reconstruct	O
the	O
intended	O
SQL	O
query	O
from	O
natural	O
language	O
question	O
.	O

Moreover	O
,	O
the	O
relations	O
between	O
the	O
slot	O
mentions	O
,	O
such	O
as	O
<	O
lanes	O
,	O
above	O
,	O
8	O
>	O
forming	O
a	O
filter	O
condition	O
,	O
are	O
represented	O
by	O
proximity	O
in	O
linear	O
order	O
or	O
other	O
linguistic	O
cues	O
.	O

SQL	O
:	O
SELECT	O
SUM	O
(	O
Split	O
(	O
50	O
m	O
)	O
)	O
FROM	O
some	O
table	O
WHERE	O
Name	O
=	O
'	O
Josefin	O
Lillhage	O
'	O
AND	O
Lane	O
>	O
8	O
We	O
can	O
see	O
that	O
many	O
SQL	O
elements	O
,	O
or	O
slots	O
,	O
such	O
as	O
column	O
names	O
of	O
SPLIT	O
(	O
50	O
M	O
)	O
and	O
LANE	O
,	O
values	O
like	O
"	O
Josefin	O
Lillhage	O
"	O
and	O
8	O
,	O
as	O
well	O
as	O
operators	O
>	O
are	O
mentioned	O
with	O
words	O
similar	O
in	O
form	O
and/or	O
meaning	O
.	O

b.	O

Question	O
:	O
What	O
is	O
the	O
total	O
sum	O
of	O
50	O
m	O
splits	O
for	O
Josefin	O
Lillhage	O
in	O
lanes	O
above	O
8	O
?	O

(	O
1	O
)	O
a.	O

Consider	O
the	O
question	O
and	O
its	O
corresponding	O
SQL	O
query	O
in	O
example	O
(	O
1	O
)	O
,	O
with	O
the	O
headers	O
in	O
the	O
schema	O
being	O
{	O
LANE	O
,	O
NAME	O
,	O
NATIONALITY	O
,	O
SPLIT	O
(	O
50	O
M	O
)	O
,	O
TIME	O
}	O
.	O

In	O
this	O
new	O
formulation	O
,	O
the	O
key	O
to	O
synthesizing	O
SQL	O
is	O
to	O
extract	O
the	O
mentions	O
of	O
SQL	O
slots	O
and	O
the	O
relations	O
between	O
them	O
.	O

among	O
SQL	O
sub	O
-	O
clauses	O
,	O
as	O
each	O
type	O
of	O
slots	O
is	O
modeled	O
separately	O
.	O

Such	O
dedicated	O
modules	O
are	O
complex	O
and	O
often	O
fall	O
short	O
of	O
capturing	O
inter	O
-	O
dependencies	O
*	O
Equal	O
contributions	O
.	O

Most	O
of	O
such	O
systems	O
take	O
a	O
sketch	O
-	O
based	O
approach	O
(	O
Xu	O
et	O
al	O
.	O
,	O
2018	O
)	O
that	O
builds	O
several	O
specialized	O
modules	O
,	O
each	O
of	O
which	O
is	O
dedicated	O
to	O
predicting	O
a	O
particular	O
type	O
of	O
slots	O
,	O
such	O
as	O
the	O
column	O
in	O
SELECT	O
,	O
or	O
the	O
filter	O
value	O
in	O
WHERE	O
.	O

Introduction	O
.	O

Such	O
modularized	O
systems	O
are	O
not	O
only	O
complex	O
but	O
also	O
of	O
limited	O
capacity	O
for	O
capturing	O
interdependencies	O
among	O
SQL	O
clauses	O
.	O

